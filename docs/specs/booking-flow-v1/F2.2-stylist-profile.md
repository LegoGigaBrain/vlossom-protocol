# F2.2: Stylist Profile View

## Feature Specification

**Feature ID:** F2.2
**Feature Name:** Stylist Profile View
**Milestone:** 2 - Customer Can Book
**Priority:** High
**Status:** Planned
**Depends On:** F2.1

---

## User Story

> As a customer, I want to view a stylist's full profile including their services, portfolio, and availability so that I can decide if they're the right fit for me.

---

## Acceptance Criteria

1. Profile displays stylist's avatar, name, and bio
2. Profile shows verification status badge
3. Services list with prices and durations
4. Portfolio images displayed in gallery
5. Operating mode displayed (Mobile/Fixed/Hybrid)
6. "Book Now" CTA that opens booking dialog
7. Back navigation to stylist list

---

## Technical Specification

### API Endpoint

```
GET /api/stylists/:id
```

**Response:**
```json
{
  "id": "uuid",
  "displayName": "string",
  "avatarUrl": "string | null",
  "verificationStatus": "PENDING | VERIFIED | REJECTED",
  "memberSince": "ISO 8601 date",
  "bio": "string | null",
  "specialties": ["string"],
  "serviceCategories": ["string"],
  "portfolioImages": ["url"],
  "operatingMode": "FIXED | HYBRID | MOBILE",
  "serviceRadius": "number | null",
  "baseLocation": { "lat": 0, "lng": 0, "address": "string" },
  "isAcceptingBookings": "boolean",
  "services": [
    {
      "id": "uuid",
      "name": "string",
      "category": "string",
      "description": "string | null",
      "priceAmountCents": "string",
      "estimatedDurationMin": "number"
    }
  ]
}
```

---

### Files to Create

| File | Purpose |
|------|---------|
| `apps/web/hooks/use-stylist.ts` | React Query hook for single stylist |
| `apps/web/components/stylists/stylist-profile.tsx` | Profile header component |
| `apps/web/components/stylists/service-list.tsx` | Services list component |
| `apps/web/components/stylists/portfolio-gallery.tsx` | Portfolio image gallery |
| `apps/web/app/stylists/[id]/page.tsx` | Profile page |

---

### Component: StylistProfile

```tsx
interface StylistProfileProps {
  stylist: Stylist;
  onBookNow: () => void;
}
```

**Display Sections:**
1. **Header**: Avatar, name, verification badge, member since
2. **Bio**: Full bio text
3. **Specialties**: Tags for each specialty
4. **Operating Mode**: Badge + service radius if mobile
5. **Location**: Base location address (if fixed/hybrid)
6. **Book Now**: Primary CTA button

**Layout:**
```
+----------------------------------+
|  [<] Back to Stylists            |
+----------------------------------+
|   [Avatar]                       |
|   Name âœ“ Verified                |
|   Member since Dec 2024          |
+----------------------------------+
|   Bio text here...               |
+----------------------------------+
|   Specialties: [Hair] [Braids]   |
+----------------------------------+
|   ðŸ“ Mobile stylist              |
|   Travels up to 25km             |
+----------------------------------+
|   [    Book Now    ]             |
+----------------------------------+
```

---

### Component: ServiceList

```tsx
interface ServiceListProps {
  services: Service[];
  onSelectService: (service: Service) => void;
}
```

**Display per Service:**
- Service name
- Category badge
- Description (truncated)
- Price (formatted: "R350")
- Duration ("1h 30min")
- "Select" button

**Layout:**
```
+----------------------------------+
| Services                         |
+----------------------------------+
| Box Braids               R350    |
| Hair | 2h 30min                  |
| Classic braiding style...        |
|                      [Select]    |
+----------------------------------+
| Cornrows                 R200    |
| Hair | 1h 30min                  |
| Traditional cornrow...           |
|                      [Select]    |
+----------------------------------+
```

---

### Component: PortfolioGallery

```tsx
interface PortfolioGalleryProps {
  images: string[];
  onImageClick: (index: number) => void;
}
```

**Features:**
- Grid of thumbnail images
- Click to open lightbox
- Placeholder for empty portfolio

---

### Hook: useStylist

```tsx
import { useQuery } from "@tanstack/react-query";
import { getStylist } from "@/lib/stylist-client";

export function useStylist(id: string) {
  return useQuery({
    queryKey: ["stylist", id],
    queryFn: () => getStylist(id),
    enabled: !!id,
    staleTime: 5 * 60 * 1000, // 5 minutes
  });
}
```

---

### Page: /stylists/[id]

**Route:** `apps/web/app/stylists/[id]/page.tsx`

**Full Layout:**
```
+----------------------------------+
|  [<] Back                        |
+----------------------------------+
|  Profile Header                  |
+----------------------------------+
|  Portfolio Gallery               |
+----------------------------------+
|  Services List                   |
+----------------------------------+
|  [    Book Now    ]              |
+----------------------------------+
```

**Features:**
- Dynamic route with stylist ID
- Loading skeleton during fetch
- 404 handling for invalid ID
- "Book Now" opens booking dialog (F2.3-F2.7)

---

## UI/UX Requirements

### Visual Design
- Profile header: Full width, centered
- Avatar: 120x120px circle
- Verification badge: Green checkmark if verified
- Services: Card-based list
- Portfolio: 3-column grid

### States
- **Loading:** Skeleton for each section
- **Error:** "Stylist not found" + return link
- **Not Accepting:** "Not accepting bookings" message

### Interactions
- Back button: Navigate to /stylists
- Service select: Opens booking dialog with service pre-selected
- Book Now: Opens booking dialog at service selection step
- Portfolio image: Opens lightbox

---

## Tasks Breakdown

| Task | Effort | Priority |
|------|--------|----------|
| Add `getStylist` to `lib/stylist-client.ts` | 15min | P0 |
| Create `hooks/use-stylist.ts` | 15min | P0 |
| Create `StylistProfile` component | 45min | P0 |
| Create `ServiceList` component | 45min | P0 |
| Create `PortfolioGallery` component | 30min | P1 |
| Create `/stylists/[id]` page | 30min | P0 |
| Add loading skeletons | 20min | P1 |
| Add error/404 handling | 15min | P1 |
| Mobile layout adjustments | 20min | P1 |

**Total Estimated Time:** ~4 hours

---

## Verification Checklist

- [ ] Profile page loads correctly
- [ ] Avatar displays (or fallback)
- [ ] Verification badge shows correctly
- [ ] Bio displays full text
- [ ] Specialties show as tags
- [ ] Operating mode displays correctly
- [ ] Services list renders all services
- [ ] Service prices formatted correctly
- [ ] Service durations formatted correctly
- [ ] Portfolio gallery works
- [ ] "Book Now" button works
- [ ] Back navigation works
- [ ] Loading state displays
- [ ] 404 page for invalid ID
- [ ] Mobile layout works
