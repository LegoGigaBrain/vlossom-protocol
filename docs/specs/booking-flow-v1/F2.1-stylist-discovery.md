# F2.1: Stylist Browse/Discovery

## Feature Specification

**Feature ID:** F2.1
**Feature Name:** Stylist Browse/Discovery
**Milestone:** 2 - Customer Can Book
**Priority:** High
**Status:** Planned

---

## User Story

> As a customer, I want to browse and search for stylists so that I can find the right person for my beauty service.

---

## Acceptance Criteria

1. Customer can view a list of stylists in grid/list layout
2. Customer can search by service category (Hair, Nails, Makeup, etc.)
3. Customer can filter by location (radius from current position)
4. Results show stylist name, avatar, rating, specialties
5. Clicking a stylist navigates to their profile (F2.2)
6. Pagination loads more results as user scrolls

---

## Technical Specification

### API Endpoint

```
GET /api/stylists
```

**Query Parameters:**
| Param | Type | Description |
|-------|------|-------------|
| `lat` | number | User latitude |
| `lng` | number | User longitude |
| `serviceCategory` | string | Filter by category |
| `radius` | number | Search radius in km (default: 50) |
| `page` | number | Page number (default: 1) |
| `pageSize` | number | Items per page (default: 20) |

**Response:**
```json
{
  "items": [
    {
      "id": "uuid",
      "displayName": "string",
      "avatarUrl": "string | null",
      "verificationStatus": "string",
      "specialties": ["string"],
      "operatingMode": "FIXED | HYBRID | MOBILE",
      "baseLocation": { "lat": 0, "lng": 0, "address": "string" },
      "services": [
        { "id": "uuid", "name": "string", "category": "string", "priceAmountCents": "string" }
      ]
    }
  ],
  "pagination": { "page": 1, "pageSize": 20, "total": 100, "totalPages": 5 }
}
```

---

### Files to Create

| File | Purpose |
|------|---------|
| `apps/web/lib/stylist-client.ts` | API client functions |
| `apps/web/hooks/use-stylists.ts` | React Query hook |
| `apps/web/components/stylists/stylist-card.tsx` | Stylist card component |
| `apps/web/components/stylists/stylist-grid.tsx` | Grid layout |
| `apps/web/components/stylists/stylist-filters.tsx` | Search/filter bar |
| `apps/web/app/stylists/page.tsx` | Stylists listing page |

---

### Component: StylistCard

```tsx
interface StylistCardProps {
  stylist: {
    id: string;
    displayName: string;
    avatarUrl: string | null;
    specialties: string[];
    operatingMode: string;
    services: Array<{ name: string; priceAmountCents: string }>;
  };
  onClick: () => void;
}
```

**Display Elements:**
- Avatar (fallback to initials)
- Display name
- Specialties as tags
- Operating mode badge (Mobile/Fixed/Hybrid)
- Starting price ("From R150")
- "View Profile" CTA

**Styling:**
```tsx
<div className="bg-surface rounded-card shadow-card p-lg hover:shadow-elevated transition-shadow">
  {/* Card content */}
</div>
```

---

### Component: StylistFilters

```tsx
interface StylistFiltersProps {
  filters: {
    category: string | null;
    radius: number;
  };
  onFiltersChange: (filters) => void;
}
```

**Filter Options:**
- Service category dropdown (All, Hair, Nails, Makeup, Skincare)
- Location toggle (Use my location / Any location)
- Radius slider (5km - 100km)
- Search input (future: text search)

---

### Hook: useStylists

```tsx
import { useQuery } from "@tanstack/react-query";
import { getStylists } from "@/lib/stylist-client";

interface UseStylists {
  filters: {
    lat?: number;
    lng?: number;
    serviceCategory?: string;
    radius?: number;
  };
  page?: number;
}

export function useStylists({ filters, page = 1 }: UseStylists) {
  return useQuery({
    queryKey: ["stylists", filters, page],
    queryFn: () => getStylists({ ...filters, page }),
    staleTime: 60 * 1000, // 1 minute
  });
}
```

---

### Page: /stylists

**Route:** `apps/web/app/stylists/page.tsx`

**Layout:**
```
+----------------------------------+
|        Stylist Filters           |
+----------------------------------+
|  Card  |  Card  |  Card  |  Card |
|  Card  |  Card  |  Card  |  Card |
|  Card  |  Card  |  Card  |  Card |
+----------------------------------+
|       Load More / Pagination     |
+----------------------------------+
```

**Features:**
- Server component with client filter state
- Infinite scroll or "Load More" button
- Empty state: "No stylists found matching your criteria"
- Loading skeleton during fetch

---

## UI/UX Requirements

### Visual Design
- Grid: 4 columns desktop, 2 tablet, 1 mobile
- Card aspect ratio: ~3:4
- Avatar: 80x80px circle
- Use brand colors from theme system

### States
- **Loading:** Skeleton cards (8 placeholders)
- **Empty:** Illustration + "No stylists found" + suggestion to adjust filters
- **Error:** Error message + "Try again" button
- **Success:** Grid of stylist cards

### Interactions
- Hover: Card lifts with shadow
- Click: Navigate to `/stylists/[id]`
- Filter change: Debounced API call (300ms)

---

## Tasks Breakdown

| Task | Effort | Priority |
|------|--------|----------|
| Create `lib/stylist-client.ts` | 30min | P0 |
| Create `hooks/use-stylists.ts` | 20min | P0 |
| Create `StylistCard` component | 45min | P0 |
| Create `StylistGrid` component | 20min | P0 |
| Create `StylistFilters` component | 45min | P1 |
| Create `/stylists` page | 30min | P0 |
| Add loading skeletons | 20min | P1 |
| Add empty/error states | 20min | P1 |
| Mobile responsive adjustments | 20min | P1 |

**Total Estimated Time:** ~4 hours

---

## Verification Checklist

- [ ] Stylist grid renders correctly
- [ ] Cards display all required info
- [ ] Category filter works
- [ ] Location filter works (if enabled)
- [ ] Pagination loads more results
- [ ] Click navigates to profile
- [ ] Mobile layout works
- [ ] Loading skeleton displays
- [ ] Empty state displays when no results
- [ ] Error state displays on API failure
