# F3.3: Services Management (CRUD)

**Status**: Pending
**Priority**: High (Week 5)

## Purpose

Full CRUD interface for stylists to manage their service catalog — create, edit, delete, and toggle services.

## User Story

As a stylist, I want to manage my service offerings, so customers can see and book the services I provide.

## Components

### Page
- `app/dashboard/services/page.tsx` — Services list with add button

### Components
- `components/dashboard/service-list.tsx` — Grid/list of services
- `components/dashboard/service-form.tsx` — Create/edit form
- `components/dashboard/service-dialog.tsx` — Modal wrapper for form

## UI Layout

### Services List

```
┌─────────────────────────────────────────────────────────────┐
│  My Services                              [+ Add Service]   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ Box Braids                                    ● Active  ││
│  │ Hair                                                    ││
│  │ R850.00 · 4h                                            ││
│  │                                                          ││
│  │ [Edit]  [Toggle Off]  [Delete]                          ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ Silk Press                                    ● Active  ││
│  │ Hair                                                    ││
│  │ R450.00 · 2h                                            ││
│  │                                                          ││
│  │ [Edit]  [Toggle Off]  [Delete]                          ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ Manicure                                     ○ Inactive ││
│  │ Nails                                                   ││
│  │ R200.00 · 45m                                           ││
│  │                                                          ││
│  │ [Edit]  [Toggle On]  [Delete]                           ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Service Form Dialog

```
┌─────────────────────────────────────────────────┐
│  Add Service                                ✕   │
├─────────────────────────────────────────────────┤
│                                                 │
│  Service Name *                                 │
│  ┌─────────────────────────────────────────────┐│
│  │ Box Braids                                  ││
│  └─────────────────────────────────────────────┘│
│                                                 │
│  Category *                                     │
│  ┌─────────────────────────────────────────────┐│
│  │ Hair                                      ▼ ││
│  └─────────────────────────────────────────────┘│
│                                                 │
│  Description                                    │
│  ┌─────────────────────────────────────────────┐│
│  │ Classic box braids with extensions.         ││
│  │ Includes wash and conditioning.             ││
│  │                                             ││
│  └─────────────────────────────────────────────┘│
│                                                 │
│  Price (ZAR) *               Duration *         │
│  ┌───────────────────┐       ┌─────────────────┐│
│  │ R 850.00          │       │ 4h 0m         ▼ ││
│  └───────────────────┘       └─────────────────┘│
│                                                 │
│  ┌─────────────────────────────────────────────┐│
│  │ ☑ Available for booking                     ││
│  └─────────────────────────────────────────────┘│
│                                                 │
│  ┌─────────────┐  ┌─────────────────────────┐  │
│  │   Cancel    │  │        Save             │  │
│  └─────────────┘  └─────────────────────────┘  │
└─────────────────────────────────────────────────┘
```

## Backend Endpoints

### Create Service
```
POST /api/stylists/services
Authorization: Bearer <token>

Body:
{
  "name": "Box Braids",
  "category": "Hair",
  "description": "Classic box braids with extensions",
  "priceAmountCents": 85000,
  "estimatedDurationMin": 240,
  "isActive": true
}

Response: 201 Created
{
  "id": "uuid",
  "name": "Box Braids",
  "category": "Hair",
  "description": "...",
  "priceAmountCents": 85000,
  "estimatedDurationMin": 240,
  "isActive": true,
  "createdAt": "...",
  "updatedAt": "..."
}
```

### Update Service
```
PUT /api/stylists/services/:id
Authorization: Bearer <token>

Body: (partial update allowed)
{
  "name": "Box Braids (Medium)",
  "priceAmountCents": 90000
}

Response: 200 OK
{ ...updated service }
```

### Delete Service
```
DELETE /api/stylists/services/:id
Authorization: Bearer <token>

Response: 204 No Content
```

### List Services
```
GET /api/stylists/services
Authorization: Bearer <token>

Response: 200 OK
{
  "services": [...],
  "total": 5
}
```

## Form Validation

| Field | Rules |
|-------|-------|
| Name | Required, 2-100 characters |
| Category | Required, enum: Hair, Nails, Makeup, Lashes, Facials |
| Description | Optional, max 500 characters |
| Price | Required, min R10.00, max R50,000.00 |
| Duration | Required, 15 min - 8 hours |
| Active | Boolean, default true |

## Categories

```typescript
enum ServiceCategory {
  HAIR = 'Hair',
  NAILS = 'Nails',
  MAKEUP = 'Makeup',
  LASHES = 'Lashes',
  FACIALS = 'Facials'
}
```

## Duration Options

Dropdown with common durations:
- 15 min, 30 min, 45 min
- 1h, 1h 30m, 2h, 2h 30m, 3h
- 3h 30m, 4h, 5h, 6h, 7h, 8h

## Delete Confirmation

Services with active bookings cannot be deleted — only deactivated.

```
┌─────────────────────────────────────────────────┐
│  Delete Service?                            ✕   │
├─────────────────────────────────────────────────┤
│                                                 │
│  Are you sure you want to delete "Box Braids"? │
│                                                 │
│  This action cannot be undone.                  │
│                                                 │
│  ⚠️ This service has 2 upcoming bookings.       │
│  Please complete or cancel them first.          │
│                                                 │
│  ┌─────────────┐  ┌─────────────────────────┐  │
│  │   Cancel    │  │   Delete (disabled)     │  │
│  └─────────────┘  └─────────────────────────┘  │
└─────────────────────────────────────────────────┘
```

## Acceptance Criteria

- [ ] Services list shows all stylist's services
- [ ] Can create new service with all fields
- [ ] Can edit existing service
- [ ] Can toggle service active/inactive
- [ ] Can delete service (if no active bookings)
- [ ] Form validation works correctly
- [ ] Price displays in ZAR format
- [ ] Duration displays in human-readable format
- [ ] Success/error toasts shown
- [ ] List updates immediately after CRUD operations
- [ ] Empty state with CTA when no services
